version: '3.4'

services:

  hadzy-comments.storage.worker.dev:
    image: hadzy/comments.storage.worker:1.0.0
    ports:
      - "5121:5121"
    build:
      context: .
      dockerfile: Services/CommentsStorage/CommentsStorage.Worker/Dockerfile.develop
    environment:
      - ASPNETCORE_URLS=http://*:5121
      - Seq:Url=${SEQ_URL}
      - RabbitMq:Hostname=${RABBITMQ_HOSTNAME}
      - RabbitMq:User=${RABBITMQ_USER}
      - RabbitMq:Password=${RABBITMQ_PASSWORD}
    
  hadzy-comments.fetcher.worker.dev:
    image: hadzy/comments.fetcher.api:1.0.0
    ports:
      - "5151:5151"
    build:
      context: .
      dockerfile: Services/YouTubeCommentsFetcher/YouTubeCommentsFetcher.Worker/Dockerfile.develop
    environment:
      - ASPNETCORE_URLS=http://*:5151
      - YouTube:ApiKey=${YOUTUBE_APIKEY}
      - Seq:Url=${SEQ_URL}
      - RabbitMq:Hostname=${RABBITMQ_HOSTNAME}
      - RabbitMq:User=${RABBITMQ_USER}
      - RabbitMq:Password=${RABBITMQ_PASSWORD}
        
  hadzy-comments.fetch.status.integration.worker.dev:
    image: hadzy/comments.fetch.status.integration.worker:1.0.0
    ports:
      - "5171:5171"
    build:
      context: .
      dockerfile: Services/CommentsFetchStatusIntegration/CommentsFetchStatusIntegration.Worker/Dockerfile.develop
    environment:
      - ASPNETCORE_URLS=http://*:5171
      - Seq:Url=${SEQ_URL}
      - RabbitMq:Hostname=${RABBITMQ_HOSTNAME}
      - RabbitMq:User=${RABBITMQ_USER}
      - RabbitMq:Password=${RABBITMQ_PASSWORD}
      - MongoDb:ConnectionString=${MONGODB_CONNECTIONSTRING}
      - MongoDb:DatabaseName=${MONGODB_DATABASENAME}
      - MongoDb:CommentsStatusCollectionName=${MONGODB_COLLECTIONNAME}